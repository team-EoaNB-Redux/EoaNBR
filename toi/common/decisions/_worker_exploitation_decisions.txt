EOANBSYS_worker_organization_decision_category = { #Worker_Exploitation_Organization

	worker_unrest_incident = {
		icon = generic_civil_support
		allowed = {
			# always = yes
			tag = ENG
		}
		activation = {
			hidden_trigger = {
				NOT = { has_country_flag = worker_unrest_incident_mission_stop }
				custom_trigger_tooltip = {
					tooltip = any_worker_unrest_states_have_over_10_DCI_tooltip
					any_owned_state = { check_variable = { var = worker_exploitation_value value = 10 compare = greater_than_or_equals } }
				}
				custom_trigger_tooltip = {
					tooltip = any_worker_organization_states_have_over_10_DCI_tooltip
					any_owned_state = { check_variable = { var = worker_organization_value value = 10 compare = greater_than_or_equals } }
				}
			}
        }
		available = {
			hidden_trigger = { always = no }
		}
        cancel_trigger = {
            custom_trigger_tooltip = {
				tooltip = all_worker_unrest_states_have_under_10_DCI_tooltip
				all_owned_state = { check_variable = { var = worker_exploitation_value value = 10 compare = less_than } }
			}
			custom_trigger_tooltip = {
				tooltip = all_worker_unrest_states_have_under_10_DCI_tooltip
				all_owned_state = { check_variable = { var = worker_organization_value value = 10 compare = less_than } }
			}
        }
        days_mission_timeout = 90
		is_good = no
		selectable_mission = no
		fire_only_once = no
        timeout_effect = {
			custom_effect_tooltip = worker_unrest_incident_tooltip
            hidden_effect = {
				random_owned_state = {
					limit = { 
						check_variable = { var = worker_exploitation_value value = 10 compare = greater_than_or_equals } 
						check_variable = { var = worker_organization_value value = 10 compare = greater_than_or_equals } 
					}
					state_event = { id = eoanb_worker_unrest.3 random_days = 90 }
					OWNER = { set_variable = { THIS.worker_unrest_state_id = PREV.id } }
				}
				set_country_flag = worker_unrest_incident_mission_stop
				country_event = { id = eoanb_worker_unrest.1 days = 90 }
			}
        }
    }

	worker_resistance_in_state = {
		icon = GFX_decision_generic_political_discourse
		allowed = { always = yes }
		highlight_states = {
			STATE = var:ROOT.worker_unrest_state_id
		}
		available = { worker_resistance_in_state_mission_scripted_trigger = yes }
		activation = { any_owned_state = { has_state_flag = worker_exploitation_resistance_in_state_flag } }
		fire_only_once = no
		selectable_mission = yes
		custom_cost_trigger = {
			command_power > 99.9
		}
		custom_cost_text = worker_unrest_resistance_in_state_custom_cost
		is_good = no
		days_mission_timeout = 45
		complete_effect = {
			var:worker_unrest_state_id = {
				hidden_effect = {
					set_state_flag = worker_resistance_mission_outcome_comeplete_flag
					clr_state_flag = worker_exploitation_resistance_in_state_flag
					state_event = { id = eoanb_worker_unrest.21 }
				}
			}
			hidden_effect = {
				add_command_power = -100
			}
			clear_variable = ROOT.worker_unrest_state_id

		}
		timeout_effect = {
			var:worker_unrest_state_id = {
				custom_effect_tooltip = worker_resistance_mission_outcome_timeout_tooltip
				hidden_effect = {
					set_state_flag = worker_resistance_mission_outcome_timeout_flag
					clr_state_flag = worker_exploitation_resistance_in_state_flag
					state_event = { id = eoanb_worker_unrest.21 }
				}
			}
			clear_variable = ROOT.worker_unrest_state_id
		}
		ai_will_do = {
			base = 10
		}
	}
}