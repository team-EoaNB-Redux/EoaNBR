scripted_gui = {
	custom_tabview_container_topbar = {
		context_type = player_context
		parent_window_token = top_bar
		window_name = "custom_tabview_buttons_container"

		visible = {
			always = yes
		}

		triggers = {
			# topbar_page_bg_visible = {
				# check_variable = { show_local_topbar_page > 1 }
			# }

			#custom button triggers go here
			mhc_button_click_enabled = {
				mhc_system_active_trigger = yes
			}
			open_strata_screen_click_enabled = {
				always = yes
				#has_country_flag = enable_econ
			}
			nmissle_button_click_enabled = {
				has_country_flag = nuclear_capable
			}
			space_button_click_enabled = {
				has_country_flag = space_mission_started
			}
			open_budget_screen_click_enabled = {
				NOT={has_variable = afr_prosperity_mechanic_value}
			}
		}

		dynamic_lists = {
			statistics_budget_graph = {
				array = budget_graph_amount_array
				entry_container = state_gdp_point_entry
			}
		}

		effects = {
			# page_button_click = {
				# if = {
					# limit = {
						# NOT = {
							# has_variable = show_local_topbar_page
						# }
					# }
					# set_variable = { show_local_topbar_page = 1 }
				# }
				# add_to_variable = { show_local_topbar_page = 1 }
				# #max amount of pages, increase if in need
				# if = {
					# limit = {
						# check_variable = { show_local_topbar_page > 2 }
					# }
					# set_variable = { show_local_topbar_page = 1 }
				# }
			# }
			open_budget_screen_click={
				if = {
					limit = {
						NOT = {
							ROOT = {
								has_country_flag = country_economy_view_open
							}
						}
					}
					ROOT = {
						set_country_flag = country_economy_view_open
					}
				}
				else = {
					ROOT = {
						clr_country_flag = country_economy_view_open
					}
				}
			}

			mhc_button_click = {
				if = {
					limit = {
						check_variable = { show_local_mhc = 0 }
					}
					set_variable = { show_local_mhc = 1 }
				}
				else = {
					set_variable = { show_local_mhc = 0 }
				}
				if = {
					limit = {
						has_country_flag = TTT_opened
					}
					clr_country_flag = TTT_opened
				}
				if = {
					limit = {
						has_country_flag = SP_opened
					}
					clr_country_flag = SP_opened
				}
				if = {
					limit = {
						has_country_flag = NMC_opened
					}
					clr_country_flag = NMC_opened
				}
				if= {
					limit={
						has_variable = ledger_open
					}
					clear_variable = ledger_open
					clr_country_flag = eoanbr_ledger_view_flag
				}
			}

			open_internal_politics_click = {
				if = {
					limit = { NOT = { has_country_flag = TTT_opened } }
					set_country_flag = TTT_opened
				}
				else = {
					clr_country_flag = TTT_opened
				}
				if = {
					limit = {
						check_variable = { show_local_mhc = 1 }
					}
					set_variable = { show_local_mhc = 0 }
				}
				if = {
					limit = {
						has_country_flag = SP_opened
					}
					clr_country_flag = SP_opened
				}
				if = {
					limit = {
						has_country_flag = NMC_opened
					}
					clr_country_flag = NMC_opened
				}
				if= {
					limit={
						has_variable = ledger_open
					}
					clear_variable = ledger_open
					clr_country_flag = eoanbr_ledger_view_flag
				}
			}

			open_strata_screen_click = {
				if = {
					limit = { NOT = { has_country_flag = population_economy_view_open } }
					set_country_flag = population_economy_view_open
				}
				else = {
					clr_country_flag = population_economy_view_open
				}
			}
			nmissle_button_click = {
				if = {
					limit = { NOT = { has_country_flag = NMC_opened } }
					set_country_flag = NMC_opened
				}
				else = {
					clr_country_flag = NMC_opened
				}
				if = {
					limit = {
						check_variable = { show_local_mhc = 1 }
					}
					set_variable = { show_local_mhc = 0 }
				}
				if = {
					limit = {
						has_country_flag = TTT_opened
					}
					clr_country_flag = TTT_opened
				}
				if = {
					limit = {
						has_country_flag = SP_opened
					}
					clr_country_flag = SP_opened
				}
				if= {
					limit={
						has_variable = ledger_open
					}
					clear_variable = ledger_open
					clr_country_flag = eoanbr_ledger_view_flag
				}
			}
			space_button_click = {
				if = {
					limit = { NOT = { has_country_flag = SP_opened } }
					set_country_flag = SP_opened
				}
				else = {
					clr_country_flag = SP_opened
				}
				if = {
					limit = {
						check_variable = { show_local_mhc = 1 }
					}
					set_variable = { show_local_mhc = 0 }
				}
				if = {
					limit = {
						has_country_flag = TTT_opened
					}
					clr_country_flag = TTT_opened
				}
				if = {
					limit = {
						has_country_flag = NMC_opened
					}
					clr_country_flag = NMC_opened
				}
				if= {
					limit={
						has_variable = ledger_open
					}
					clear_variable = ledger_open
					clr_country_flag = eoanbr_ledger_view_flag
				}
			}
		}
		
		ai_enabled = {
			always = no
		}
	}
}